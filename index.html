<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>  
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <script src="https://www.gstatic.com/firebasejs/4.12.0/firebase.js"></script>

    <script src="https://cdn.jsdelivr.net/momentjs/2.12.0/moment.min.js"></script>
<title>Giphy App</title>
</head>
<body>

      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="jumbotron">
              <h1 class="text-center">Giphy App</h1>
            </div>
            <div class="container">
              <div class="row">
                <div class='col-lg-12'>

                  <div class="row">
                    <div class='col-lg-12'>
                        <div class="panel panel-default">
                          <div id="panel" class="panel-heading">Topics</div>
                          <div id="btnDiv" class="panel-body">
                          </div>
                        </div>
                    </div>
                  </div> 

                  <div class="panel panel-default">
                      <div class="panel-heading">Some Gifs</div>
                      <div id="gifDiv" class="panel-body">
                      </div>
                  </div>

              </div>
            </div>
          </div>
        </div>
      </div>

      <script type="text/javascript">

        topics = ["gangster rap", "sailing", "cadillac", "tennis"];

        var quer;
        var year = "2019";
        var month = "01";
        var day = "19";
        // https://api.giphy.com/v1/gifs/search?api_key=&q=&limit=25&offset=0&rating=G&lang=en
        // var queryURL = "https://api.giphy.com/v1/gifs/search?api_key=tMaY7115vsVOvTCaJgwPY1VGcnx54oI1&limit=10" + "&q=" + quer;

      
      $(document).ready(function(){

        for (i=0; i<topics.length; i++){
          $("#btnDiv").append("<button type='submit' class='btn btn-primary'>" + topics[i] + "</button>&nbsp");
        }
      
        $('.btn').on('click', function(){
          var keywd = $(this).text();
          getGifs(keywd);
        });

      });
      
      function getGifs(keywd){
        var queryURL = "https://api.giphy.com/v1/gifs/search?api_key=tMaY7115vsVOvTCaJgwPY1VGcnx54oI1&limit=10" + "&q=" + keywd;

          $.ajax({
              url: queryURL,
              method: "GET"
            })
              .then(function(response) {
                // Storing an array of results in the results variable
                //$("#gifDiv").text(JSON.stringify(response));
                for(i=0; i<response.data.length; i++){
                  var imgUrl = response.data[i].images.original.url; 
                var stillUrl = response.data[i].images.original_still.url; 
                $("#gifDiv").append("<img src='" + imgUrl + "' data-still='" + stillUrl + "' data-animate='" + imgUrl  + "' data-state='animate' class='gif'>");
                
                }

          console.log(response);
      
              });
          }


          $(".gif").on("click", function() {
            var state = $(this).attr("data-state");
            if (state === "still") {
              $(this).attr("src", $(this).attr("data-animate"));
              $(this).attr("data-state", "animate");
            } else {
              $(this).attr("src", $(this).attr("data-still"));
              $(this).attr("data-state", "still");
            }
          });

        </script>
   </body>
</html>


